#!/usr/bin/env bash
set -eu -o pipefail

readonly crate_dir="$( cd -- $(dirname $(readlink -f ${BASH_SOURCE}))/..; pwd )"

"${crate_dir}/bin/generate-source"

(
    cd "${crate_dir}"
    cargo build --release --manifest-path "${crate_dir}/Cargo.toml"
)

"${crate_dir}/target/release/wmd" "$@"
